# üîê Gitleaks Pre-Commit Hook

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç—ñ–≤ –ø–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º `git commit` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é [gitleaks](https://github.com/gitleaks/gitleaks).

---

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### ‚ö°Ô∏è –®–≤–∏–¥–∫–æ ‚Äî –æ–¥–Ω–∏–º —Ä—è–¥–∫–æ–º
```bash
curl -sSL https://raw.githubusercontent.com/TarasLeto/gitleaks-pre-commit-hook/main/install.sh | sh
```
> –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `gitleaks` —Ç–∞ –Ω–∞–ª–∞—à—Ç—É—î hook. –ë—ñ–ª—å—à–µ –Ω—ñ—á–æ–≥–æ —Ä–æ–±–∏—Ç–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

### üîß –í—Ä—É—á–Ω—É
```bash
# 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ gitleaks
brew install gitleaks          # macOS
# –∞–±–æ https://github.com/gitleaks/gitleaks/releases  # Linux

# 2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ hook
cp pre-commit .git/hooks/pre-commit
chmod +x .git/hooks/pre-commit
```

---

## –Ø–∫ –ø—Ä–∞—Ü—é—î hook

–ü—Ä–∏ –∫–æ–∂–Ω–æ–º—É `git commit` hook –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

1. –ü–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å (—É–≤—ñ–º–∫–Ω–µ–Ω–æ/–≤–∏–º–∫–Ω–µ–Ω–æ)
2. –°–∫–∞–Ω—É—î –ª–∏—à–µ **staged —Ñ–∞–π–ª–∏** (—Ç–µ —â–æ –π–¥–µ —É –∫–æ–º—ñ—Ç)
3. –ë–ª–æ–∫—É—î –∫–æ–º—ñ—Ç —è–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω–æ —Å–µ–∫—Ä–µ—Ç–∏
4. –í–∏–≤–æ–¥–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç —ñ–∑ –∑–∞–º–∞—Å–∫–æ–≤–∞–Ω–∏–º–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏

---

## –ö–µ—Ä—É–≤–∞–Ω–Ω—è hook'–æ–º

```bash
# –í–∏–º–∫–Ω—É—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤–æ
git config hooks.gitleaks.enable false

# –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–Ω–æ–≤—É
git config hooks.gitleaks.enable true

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ
SKIP_GITLEAKS=1 git commit -m "..."
```

---

## –í–∏–∫–ª—é—á–µ–Ω–Ω—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä—è–¥–∫–∞

```python
MY_VAR = "not-a-real-secret"  # gitleaks:allow
```

---

## –©–æ —Ä–æ–±–∏—Ç–∏ —è–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω–æ —Å–µ–∫—Ä–µ—Ç

1. **–í–∏–¥–∞–ª—ñ—Ç—å** —Å–µ–∫—Ä–µ—Ç –∑ –∫–æ–¥—É
2. **–ó–∞–º—ñ–Ω—ñ—Ç—å** –Ω–∞ –∑–º—ñ–Ω–Ω—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:
```python
# ‚ùå –ü–æ–≥–∞–Ω–æ
TOKEN = "7341852096:AAF3zKpL8mNqR2tVxW0yZ1dCeJ4gHiUoPs6"

# ‚úÖ –î–æ–±—Ä–µ
TOKEN = os.environ.get("TELEGRAM_BOT_TOKEN")
```
3. –î–æ–¥–∞–π—Ç–µ `.env` –¥–æ `.gitignore`
4. –Ø–∫—â–æ —Å–µ–∫—Ä–µ—Ç **–≤–∂–µ –ø–æ—Ç—Ä–∞–ø–∏–≤ –≤ —ñ—Å—Ç–æ—Ä—ñ—é** ‚Äî –≤—ñ–¥–∫–ª–∏—á—Ç–µ –π–æ–≥–æ –Ω–µ–≥–∞–π–Ω–æ!

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
python3 test_hook.py
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```
‚îú‚îÄ‚îÄ install.sh      ‚Üê —ñ–Ω—Å—Ç–∞–ª—è—Ç–æ—Ä (curl pipe sh)
‚îú‚îÄ‚îÄ pre-commit      ‚Üê hook —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ test_hook.py    ‚Üê —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç
‚îî‚îÄ‚îÄ README.md       ‚Üê —Ü—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
```
